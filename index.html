<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´éŸ³äº”è¡Œ Â· æ¯æ—¥é‹å‹¢æŒ‡å—</title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/lunar.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --bg: #f4f7f6;
            --card: #ffffff;
            --accent: #3498db;
            --text-gray: #7f8c8d;
            --border-radius: 16px;
        }
        body {
            font-family: -apple-system, "SF Pro Text", "PingFang TC", "Noto Sans TC", sans-serif;
            background-color: var(--bg);
            color: var(--primary);
            padding: 20px 12px;
            margin: 0;
            line-height: 1.6;
        }
        .container { max-width: 500px; margin: 0 auto; }
        
        .card {
            background: var(--card);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.04);
            border: 1px solid rgba(0,0,0,0.02);
        }

        h1 { font-size: 1.5rem; text-align: center; margin: 0 0 20px 0; color: #34495e; font-weight: 800; letter-spacing: -0.5px; }
        h2 { 
            font-size: 1.1rem; 
            margin: 0 0 15px 0; 
            color: #2c3e50; 
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        h2::before {
            content: ''; display: inline-block; width: 4px; height: 18px;
            background: var(--accent); margin-right: 10px; border-radius: 2px;
        }

        /* é ‚éƒ¨ä»Šæ—¥è³‡è¨Š Grid */
        .today-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; text-align: center; }
        .pillar-box { background: #f8f9fa; padding: 12px 5px; border-radius: 12px; }
        .pillar-title { font-size: 0.75rem; color: var(--text-gray); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        .pillar-ny { font-size: 0.95rem; color: var(--accent); font-weight: 700; }

        /* è¼¸å…¥æ¡† */
        .input-group label { display: block; font-size: 0.9rem; margin-bottom: 8px; color: var(--text-gray); font-weight: 500; }
        input[type="date"] {
            width: 100%; padding: 14px; border: 2px solid #eef2f7;
            border-radius: 12px; font-size: 1rem; background: #fff;
            box-sizing: border-box; outline: none; transition: 0.2s;
            color: #2c3e50;
        }
        input[type="date"]:focus { border-color: var(--accent); }
        
        button {
            width: 100%; padding: 16px; background: var(--primary);
            color: #fff; border: none; border-radius: 12px;
            font-size: 1.05rem; font-weight: 600; margin-top: 20px; cursor: pointer;
            box-shadow: 0 4px 12px rgba(44, 62, 80, 0.2); transition: 0.2s;
        }
        button:active { transform: scale(0.98); }

        /* é‹å‹¢åˆ—è¡¨ */
        #result { display: none; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .fortune-item { margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #f0f0f0; }
        .fortune-item:last-child { border-bottom: none; margin-bottom: 0; }
        
        .fortune-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .fortune-title { font-weight: 700; font-size: 1rem; color: #34495e; }
        
        /* é‹å‹¢æ¨™ç±¤é¡è‰² */
        .tag { font-size: 0.8rem; padding: 4px 10px; border-radius: 6px; font-weight: 700; }
        .tag-å¤§å‰ { background: #d4edda; color: #155724; }
        .tag-ä¸­å‰ { background: #cce5ff; color: #004085; }
        .tag-å‰ { background: #fff3cd; color: #856404; }
        .tag-å¹³ { background: #e2e3e5; color: #383d41; }
        .tag-å‡¶ { background: #f8d7da; color: #721c24; }

        .fortune-content { font-size: 0.95rem; color: #555; margin-bottom: 10px; text-align: justify; }
        
        /* æ ¸å¿ƒè§£é‡‹å€å¡Š */
        .nayin-explanation { 
            background: #f8f9fa; padding: 12px; border-radius: 10px; 
            font-size: 0.9rem; color: #444; line-height: 1.5;
            border-left: 3px solid var(--accent);
        }
        .highlight-user { color: #2c3e50; font-weight: 800; }
        .highlight-target { color: var(--accent); font-weight: 800; }
        
        .footer { text-align: center; font-size: 0.8rem; color: #bbb; margin-top: 30px; margin-bottom: 20px;}
    </style>
</head>
<body onload="init()">

<div class="container">
    <h1>ğŸ“… ç´éŸ³äº”è¡Œé‹å‹¢æŒ‡å—</h1>
    
    <div class="card">
        <h2>ä»Šæ—¥å¤©åœ°æ°£å ´</h2>
        <div class="today-grid">
            <div class="pillar-box">
                <div class="pillar-title">æµå¹´ (å¤§ç’°å¢ƒ)</div>
                <div class="pillar-ny" id="todayYearNY"></div>
            </div>
            <div class="pillar-box">
                <div class="pillar-title">æµæœˆ (äº‹æ¥­å®®)</div>
                <div class="pillar-ny" id="todayMonthNY"></div>
            </div>
            <div class="pillar-box">
                <div class="pillar-title">æµæ—¥ (ä»Šæ—¥é‹)</div>
                <div class="pillar-ny" id="todayDayNY"></div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="input-group">
            <label>è«‹è¼¸å…¥æ‚¨çš„åœ‹æ›†ç”Ÿæ—¥ï¼Œåˆ†æä»Šæ—¥å¥‘åˆåº¦</label>
            <input type="date" id="birthdate">
        </div>
        <button onclick="analyze()">é–‹å§‹åˆ†ææˆ‘çš„é‹å‹¢</button>
    </div>

    <div id="result">
        
        <div class="card">
            <h2>ğŸ‘¤ æ‚¨çš„ç´éŸ³å‘½æ ¼</h2>
            <div style="text-align: center; margin-bottom: 15px;">
                <span style="font-size: 1.8rem; font-weight: 800; color: var(--primary);" id="userDayNY"></span>
                <div style="font-size: 0.9rem; color: #888; margin-top: 5px;">æ‚¨å±¬æ–¼æ—¥æŸ±ç´éŸ³</div>
            </div>
            <div id="userDesc" class="nayin-explanation" style="background: #eef2f7; border-left-color: #2c3e50;"></div>
        </div>

        <div class="card">
            <h2>ğŸ”® æµå¹´èˆ‡æµæœˆé‹å‹¢</h2>
            <div id="annualMonthlyFortune"></div>
        </div>

        <div class="card">
            <h2>ğŸ€ ä»Šæ—¥é‹å‹¢è©³è§£</h2>
            <div id="dailyFortuneList"></div>
        </div>

    </div>

    <div class="footer">Professional Na-Yin Astrology Analysis</div>
</div>

<script>
    // ç´éŸ³äº”è¡Œç™½è©±ç‰¹è³ªåº«
    const NaYinTraits = {
        "æµ·ä¸­é‡‘": "æ·±è—ä¸éœ²çš„æ½›åŠ›ï¼Œå¦‚æµ·åº•å¯¶è—ï¼Œéœ€è¦è¢«ç™¼æ˜ã€‚",
        "çˆä¸­ç«": "ç†±æƒ…å¦‚ç«ï¼Œå…·æœ‰å¼·å¤§çš„æ„ŸæŸ“åŠ›ï¼Œèƒ½æº«æš–å‘¨é­ã€‚",
        "å¤§æ—æœ¨": "æè‘‰ç¹èŒ‚ï¼Œå¿ƒèƒ¸å¯¬å»£ï¼Œå¦‚å¤§æ¨¹èˆ¬åº‡è”­ä»–äººã€‚",
        "è·¯æ—åœŸ": "è…³è¸å¯¦åœ°ï¼Œé»˜é»˜ä»˜å‡ºï¼Œæ˜¯çœ¾äººå€šè³´çš„åŸºçŸ³ã€‚",
        "åŠé‹’é‡‘": "éŠ³åˆ©æœæ±ºï¼ŒåŸ·è¡ŒåŠ›æ¥µå¼·ï¼Œèƒ½æ–¬æ–·ä¸€åˆ‡é˜»ç¤™ã€‚",
        "å±±é ­ç«": "å…‰èŠ’å››å°„ï¼Œå¿—å‘é«˜é ï¼Œå¦‚å±±é ‚æ—¥å‡ºèˆ¬è€€çœ¼ã€‚",
        "æ¾—ä¸‹æ°´": "æ™ºæ…§æ·±é ï¼Œè™•äº‹åœ“èï¼Œå¦‚ç´°æ°´é•·æµèˆ¬å …éŸŒã€‚",
        "åŸé ­åœŸ": "ç©©å¦‚æ³°å±±ï¼Œé˜²ç¦¦åŠ›å¼·ï¼Œçµ¦äººæ¥µå¤§çš„å®‰å…¨æ„Ÿã€‚",
        "ç™½è Ÿé‡‘": "è³ªåœ°ç´”æ·¨ï¼Œå¯å¡‘æ€§é«˜ï¼Œå–„æ–¼é©æ‡‰å„ç¨®è®ŠåŒ–ã€‚",
        "æ¥ŠæŸ³æœ¨": "èº«æ®µæŸ”è»Ÿï¼Œéš¨é¢¨è€Œå‹•ï¼Œå…·æœ‰æ¥µä½³çš„äº¤éš›æ‰‹è…•ã€‚",
        "æ³‰ä¸­æ°´": "æºæºä¸çµ•ï¼Œå¿ƒæ€éˆå·§ï¼Œæ“æœ‰è±å¯Œçš„ç²¾ç¥å…§æ¶µã€‚",
        "å±‹ä¸ŠåœŸ": "å …å®ˆå´—ä½ï¼Œèª ä¿¡å¯é ï¼Œå…·æœ‰å¼·çƒˆçš„è²¬ä»»å¿ƒã€‚",
        "éœ¹é‚ç«": "é›·éœ†è¬éˆï¼Œçˆ†ç™¼åŠ›å¼·ï¼Œé©åˆé–‹å‰µæ€§çš„æŒ‘æˆ°ã€‚",
        "æ¾æŸæœ¨": "å‚²é›ªå‡Œéœœï¼Œæ„å¿—å …å®šï¼Œåœ¨é€†å¢ƒä¸­æ›´èƒ½æˆé•·ã€‚",
        "é•·æµæ°´": "æ»”æ»”ä¸çµ•ï¼Œæ´»èºå¥”æ”¾ï¼Œäººè„ˆèˆ‡è³‡æºæµå‹•å¿«ã€‚",
        "æ²™ä¸­åœŸ": "å¤–è¡¨æ¨¸å¯¦ï¼Œå…§è˜Šå…‰è¯ï¼Œæ­·ç¶“æ·˜æ´—æ–¹é¡¯åƒ¹å€¼ã€‚",
        "å¤©ä¸Šç«": "å…‰æ˜ç£Šè½ï¼Œå…¬æ­£ç„¡ç§ï¼Œå…·æœ‰å¤©ç”Ÿçš„é ˜å°é¢¨ç¯„ã€‚",
        "çŸ³æ¦´æœ¨": "å¤–å‰›å…§æŸ”ï¼Œç¢©æœç´¯ç´¯ï¼Œå®¶åº­èˆ‡äº‹æ¥­çš†èƒ½è±æ”¶ã€‚",
        "å¹³åœ°æœ¨": "å¹³æ˜“è¿‘äººï¼Œå»£çµå–„ç·£ï¼Œæ˜¯åœ˜éšŠä¸­çš„å’Œå¹³ä½¿è€…ã€‚",
        "å£ä¸ŠåœŸ": "ä¾é™„å¼·è€…ï¼Œå€ŸåŠ›ä½¿åŠ›ï¼Œåœ¨ç©©å®šå¹³å°èƒ½ç™¼æ®æ‰€é•·ã€‚",
        "é‡‘ç®”é‡‘": "å¤–è¡¨å…‰é®®ï¼Œæ³¨é‡å½¢è±¡ï¼Œåœ¨äººç¾¤ä¸­ç¸½æ˜¯äº®çœ¼ã€‚",
        "è¦†ç‡ˆç«": "é»äº®é»‘å¤œï¼ŒçŠ§ç‰²å¥‰ç»ï¼Œå¸¸æˆç‚ºä»–äººçš„æŒ‡è·¯æ˜ç‡ˆã€‚",
        "å¤©æ²³æ°´": "æ°£å‹¢ç£…ç¤´ï¼Œæ©æ¾¤å»£è¢«ï¼Œå…·æœ‰é«˜é çš„æ™ºæ…§èˆ‡æ ¼å±€ã€‚",
        "å¤§é©›åœŸ": "å››é€šå…«é”ï¼Œå¥”æ³¢å››æ–¹ï¼Œåœ¨è®Šå‹•ä¸­å‰µé€ è²¡å¯Œã€‚",
        "é‡µé‡§é‡‘": "ç²¾ç·»å„ªé›…ï¼Œæ°£è³ªå‡ºçœ¾ï¼Œå¤©ç”Ÿå¸¶æœ‰è²´æ—æ°£æ¯ã€‚",
        "æ¡‘æŸ˜æœ¨": "å¯¦ç”¨ä¹‹æï¼Œèƒ½å±ˆèƒ½ä¼¸ï¼Œåœ¨ä»»ä½•ç’°å¢ƒéƒ½èƒ½ç”Ÿå­˜ã€‚",
        "å¤§æºªæ°´": "é©šæ¿¤é§­æµªï¼Œå¿ƒæ©Ÿæ·±æ²‰ï¼Œæ“æœ‰å¼·å¤§çš„è¬€ç•¥èƒ½åŠ›ã€‚",
        "æ²™ä¸­é‡‘": "æ²™è£¡æ·˜é‡‘ï¼Œå»è•ªå­˜èï¼ŒæˆåŠŸéœ€è¦æ™‚é–“çš„æ·¬éŠã€‚",
        "å¤§æµ·æ°´": "åŒ…å®¹è¬ç‰©ï¼Œæ·±ä¸å¯æ¸¬ï¼Œæ“æœ‰çµ±å¾¡ç™¾å·çš„æ°£é‡ã€‚"
    };

    // å–å¾—ç´éŸ³äº”è¡Œå±¬æ€§ (å–æœ€å¾Œä¸€å€‹å­—)
    function getElement(nayin) {
        return nayin.slice(-1);
    }

    // åˆ¤æ–·äº’å‹•é—œä¿‚ (æ ¸å¿ƒé‚è¼¯ï¼Œä¸ä½¿ç”¨è¡“èªï¼Œè½‰ç‚ºå…§éƒ¨ä»£ç¢¼)
    function getInteractionCode(userEl, targetEl) {
        // userEl æ˜¯å‘½ä¸»(æˆ‘)ï¼ŒtargetEl æ˜¯æµæ—¥(ç’°å¢ƒ)
        if (userEl === targetEl) return "SAME"; // æ¯”æ—º
        
        // ç”Ÿæˆ‘è€… (ç’°å¢ƒç”Ÿæˆ‘)
        if ((targetEl === "é‡‘" && userEl === "æ°´") || 
            (targetEl === "æ°´" && userEl === "æœ¨") || 
            (targetEl === "æœ¨" && userEl === "ç«") || 
            (targetEl === "ç«" && userEl === "åœŸ") || 
            (targetEl === "åœŸ" && userEl === "é‡‘")) return "SUPPORT";
            
        // æˆ‘ç”Ÿè€… (æˆ‘ç”Ÿç’°å¢ƒ)
        if ((userEl === "é‡‘" && targetEl === "æ°´") || 
            (userEl === "æ°´" && targetEl === "æœ¨") || 
            (userEl === "æœ¨" && targetEl === "ç«") || 
            (userEl === "ç«" && targetEl === "åœŸ") || 
            (userEl === "åœŸ" && targetEl === "é‡‘")) return "OUTPUT";
            
        // æˆ‘å‰‹è€… (æˆ‘å‰‹ç’°å¢ƒ - è²¡)
        if ((userEl === "é‡‘" && targetEl === "æœ¨") || 
            (userEl === "æœ¨" && targetEl === "åœŸ") || 
            (userEl === "åœŸ" && targetEl === "æ°´") || 
            (userEl === "æ°´" && targetEl === "ç«") || 
            (userEl === "ç«" && targetEl === "é‡‘")) return "CONTROL";
            
        // å‰‹æˆ‘è€… (ç’°å¢ƒå‰‹æˆ‘ - å£“)
        return "PRESSURE";
    }

    let todayInfo = {};

    function init() {
        const now = new Date();
        const solar = Solar.fromYmd(now.getFullYear(), now.getMonth() + 1, now.getDate());
        const lunar = solar.getLunar();
        const eightChar = lunar.getEightChar();

        todayInfo = {
            yNY: eightChar.getYearNaYin(),
            mNY: eightChar.getMonthNaYin(),
            dNY: eightChar.getDayNaYin(),
        };

        document.getElementById('todayYearNY').innerText = todayInfo.yNY;
        document.getElementById('todayMonthNY').innerText = todayInfo.mNY;
        document.getElementById('todayDayNY').innerText = todayInfo.dNY;
    }

    function analyze() {
        const input = document.getElementById('birthdate').value;
        if (!input) return alert("è«‹å…ˆé¸æ“‡å‡ºç”Ÿæ—¥æœŸ");

        const parts = input.split('-');
        const solar = Solar.fromYmd(parseInt(parts[0]), parseInt(parts[1]), parseInt(parts[2]));
        const lunar = solar.getLunar();
        const eightChar = lunar.getEightChar();

        const userNY = eightChar.getDayNaYin();

        // 1. é¡¯ç¤ºå‘½ä¸»
        document.getElementById('userDayNY').innerText = userNY;
        document.getElementById('userDesc').innerText = NaYinTraits[userNY] || "ç¨ç‰¹çš„ç´éŸ³å‘½æ ¼ï¼Œæ“æœ‰ä¸å‡¡çš„æ½›è³ªã€‚";

        // 2. é¡¯ç¤ºæµå¹´/æµæœˆ
        const annualList = document.getElementById('annualMonthlyFortune');
        annualList.innerHTML = "";
        annualList.innerHTML += generateCard("æµå¹´æ°£å ´ (å¤§è¶¨å‹¢)", userNY, todayInfo.yNY);
        annualList.innerHTML += generateCard("æµæœˆèƒ½é‡ (äº‹æ¥­/å¿ƒæƒ…)", userNY, todayInfo.mNY);

        // 3. é¡¯ç¤ºæµæ—¥è©³ç´°é‹å‹¢
        document.getElementById('dailyFortuneList').innerHTML = generateDailyDetails(userNY, todayInfo.dNY);

        // é¡¯ç¤ºçµæœ
        document.getElementById('result').style.display = 'block';
        document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
    }

    // é€šç”¨å¡ç‰‡ç”Ÿæˆ (ç”¨æ–¼å¹´/æœˆ)
    function generateCard(title, userNY, targetNY) {
        const userEl = getElement(userNY);
        const targetEl = getElement(targetNY);
        const code = getInteractionCode(userEl, targetEl);
        
        let tag = "å¹³";
        let desc = "";
        let logic = "";

        // å°ˆæ¥­ä½†é€šä¿—çš„è§£é‡‹
        switch(code) {
            case "SUPPORT": // å°
                tag = "å¤§å‰";
                desc = "ä»Šå¹´çš„æ°£å ´å°ä½ éå¸¸å‹å–„ï¼Œå°±åƒé †æ°´æ¨èˆŸï¼Œå®¹æ˜“é‡åˆ°è²´äººææ”œï¼Œæˆ–æ˜¯ç²å¾—è³‡æºä¸Šçš„å¹«åŠ©ã€‚";
                logic = `æµå¹´çš„ã€<span class="highlight-target">${targetNY}</span>ã€‘å±¬${targetEl}ï¼Œä¾†æ»‹é¤Šä½ çš„ã€<span class="highlight-user">${userNY}</span>ã€‘å±¬${userEl}ã€‚äº”è¡Œç›¸ç”Ÿï¼Œä»£è¡¨ç’°å¢ƒä¸»å‹•çµ¦äºˆæ”¯æŒï¼Œé©åˆå­¸ç¿’ã€é€²ä¿®æˆ–å°‹æ±‚é•·è¼©å”åŠ©ã€‚`;
                break;
            case "SAME": // æ¯”
                tag = "å‰";
                desc = "èƒ½é‡å ´èˆ‡ä½ å…±æŒ¯ï¼Œé©åˆæ‹“å±•ç¤¾äº¤åœˆï¼Œèˆ‡äººåˆä½œèƒ½ç™¼æ®å¤§æ–¼äºŒçš„æ•ˆæœï¼Œä½†ä¹Ÿéœ€æ³¨æ„è‰¯æ€§ç«¶çˆ­ã€‚";
                logic = `æµå¹´çš„ã€<span class="highlight-target">${targetNY}</span>ã€‘èˆ‡ä½ çš„ã€<span class="highlight-user">${userNY}</span>ã€‘åŒå±¬${userEl}ã€‚æ°£æ¯ç›¸é€šï¼Œä»£è¡¨çµç›Ÿèˆ‡ç«¶çˆ­ä¸¦å­˜ï¼Œæ˜¯æ“´å¤§å½±éŸ¿åŠ›çš„å¥½æ™‚æ©Ÿã€‚`;
                break;
            case "CONTROL": // è²¡
                tag = "ä¸­å‰";
                desc = "é€™æ˜¯å……æ»¿æ©Ÿæœƒçš„ä¸€å¹´ï¼Œä½†éœ€è¦ä½ ä¸»å‹•å»çˆ­å–ã€‚é›–ç„¶æœƒæ¯”è¼ƒå¿™ç¢Œï¼Œä½†åŠªåŠ›å¾Œçš„æ”¶ç©«æœƒéå¸¸è±ç¢©ã€‚";
                logic = `ä½ çš„ã€<span class="highlight-user">${userNY}</span>ã€‘å±¬${userEl}ï¼Œå»ä¸»å°æµå¹´çš„ã€<span class="highlight-target">${targetNY}</span>ã€‘å±¬${targetEl}ã€‚é€™ä»£è¡¨ã€Œæˆ‘æ‰€æŒæ§è€…ç‚ºæˆæœã€ï¼Œæ©Ÿæœƒé›–å¤šï¼Œä½†å¿…é ˆè¦ªåŠ›è¦ªç‚ºæ‰èƒ½è½‰åŒ–ç‚ºå¯¦è³ªåˆ©ç›Šã€‚`;
                break;
            case "OUTPUT": // é£Ÿå‚·
                tag = "å¹³";
                desc = "ä½ çš„æ‰è¯èˆ‡èƒ½åŠ›æœ‰ç™¼æ®çš„ç©ºé–“ï¼Œé©åˆè¡¨ç¾è‡ªå·±ã€‚ä½†å› ç‚ºé€™éœ€è¦æ¶ˆè€—ä½ çš„èƒ½é‡ï¼Œå®¹æ˜“æ„Ÿåˆ°ç–²æ†Šã€‚";
                logic = `ä½ çš„ã€<span class="highlight-user">${userNY}</span>ã€‘å±¬${userEl}ï¼Œå»ç”ŸåŠ©æµå¹´çš„ã€<span class="highlight-target">${targetNY}</span>ã€‘å±¬${targetEl}ã€‚é€™æ˜¯ä¸€ç¨®ã€Œèƒ½é‡è¼¸å‡ºã€çš„ç‹€æ…‹ï¼Œé©åˆå‰µä½œèˆ‡çµ¦äºˆï¼Œä½†è¦æ³¨æ„ä¼‘æ¯ï¼Œé¿å…éåº¦é€æ”¯ã€‚`;
                break;
            case "PRESSURE": // å®˜æ®º
                tag = "å‡¶";
                desc = "å¤§ç’°å¢ƒå°ä½ å½¢æˆä¸€ç¨®ç´„æŸåŠ›ï¼Œå¯èƒ½æœƒæ„Ÿåˆ°å£“åŠ›å’ŒæŒ‘æˆ°å¢åŠ ã€‚å»ºè­°ä½èª¿è¡Œäº‹ï¼Œéµå®ˆè¦å‰‡ç‚ºä¸Šç­–ã€‚";
                logic = `æµå¹´çš„ã€<span class="highlight-target">${targetNY}</span>ã€‘å±¬${targetEl}ï¼Œä¾†å‰‹åˆ¶ä½ çš„ã€<span class="highlight-user">${userNY}</span>ã€‘å±¬${userEl}ã€‚äº”è¡Œç›¸å‰‹ï¼Œä»£è¡¨ç’°å¢ƒå°ä½ çš„è€ƒé©—ï¼Œé›–æœ‰å£“åŠ›ï¼Œä½†ä¹Ÿæ˜¯ç£¨ç·´å¿ƒæ€§ã€è‡ªæˆ‘ç´„æŸçš„æ™‚åˆ»ã€‚`;
                break;
        }

        return `
            <div class="fortune-item">
                <div class="fortune-header">
                    <span class="fortune-title">${title}</span>
                    <span class="tag tag-${tag}">${tag}</span>
                </div>
                <div class="fortune-content">${desc}</div>
                <div class="nayin-explanation">${logic}</div>
            </div>
        `;
    }

    // ç”Ÿæˆæµæ—¥è©³ç´°é‹å‹¢ (æ„›æƒ…/äº‹æ¥­/è²¡é‹)
    function generateDailyDetails(userNY, dayNY) {
        const userEl = getElement(userNY);
        const targetEl = getElement(dayNY);
        const code = getInteractionCode(userEl, targetEl);
        
        let html = "";
        const categories = [
            { title: "ğŸ’˜ æ„›æƒ…é‹å‹¢", type: "love" },
            { title: "ğŸ’¼ äº‹æ¥­é‹å‹¢", type: "career" },
            { title: "ğŸ’° è²¡å¯Œé‹å‹¢", type: "wealth" }
        ];

        const contentMap = {
            "SUPPORT": { // è¢«ç”Ÿ (å°)
                love: { grade: "å¤§å‰", text: "ä»Šæ—¥æ„Ÿæƒ…æº«é¦¨ç”œèœœï¼Œä¼´ä¾¶æˆ–å¿ƒå„€å°è±¡æœƒçµ¦ä½ å¾ˆå¤šé—œå¿ƒèˆ‡æ”¯æŒï¼Œé©åˆè«‡å¿ƒã€‚" },
                career: { grade: "å¤§å‰", text: "è²´äººé‹æ—ºï¼Œå·¥ä½œä¸Šå®¹æ˜“å¾—åˆ°ä¸Šå¸æˆ–å‰è¼©çš„æŒ‡å°ï¼Œé›£é¡Œèƒ½è¿åˆƒè€Œè§£ï¼Œé©åˆææ¡ˆã€‚" },
                wealth: { grade: "å‰", text: "è²¡é‹ç©©å®šï¼Œé©åˆé€²è¡Œé•·æœŸçš„ç†è²¡è¦åŠƒï¼Œæˆ–è€…æŠ•è³‡åœ¨è‡ªæˆ‘å­¸ç¿’ä¸Šï¼Œå›æ”¶æœƒå¾ˆé«˜ã€‚" }
            },
            "SAME": { // åŒé¡ (æ¯”)
                love: { grade: "å‰", text: "ç¤¾äº¤é‹ä¸éŒ¯ï¼Œå–®èº«è€…å®¹æ˜“åœ¨èšæœƒä¸­èªè­˜æ–°æœ‹å‹ã€‚æœ‰ä¼´è€…é©åˆèˆ‡å¦ä¸€åŠåƒæœ‹å‹èˆ¬è¼•é¬†ç›¸è™•ã€‚" },
                career: { grade: "å‰", text: "åœ˜éšŠåˆä½œé‹å‹¢ä½³ï¼Œé©åˆèˆ‡åŒäº‹è…¦åŠ›æ¿€ç›ªã€‚ä½†è¦ç•™æ„ä¸è¦å›ºåŸ·å·±è¦‹ï¼Œå¤šè½ä»–äººæ„è¦‹ã€‚" },
                wealth: { grade: "å¹³", text: "å®¹æ˜“æœ‰ç¤¾äº¤æ”¯å‡ºï¼Œä¾‹å¦‚è«‹å®¢åƒé£¯ã€‚é›–æœ‰äººè„ˆå¸¶ä¾†çš„æ¶ˆæ¯ï¼Œä½†ä¸å®œæ¶‰åŠé‡‘éŒ¢å€Ÿè²¸ã€‚" }
            },
            "CONTROL": { // æˆ‘å‰‹ (è²¡)
                love: { grade: "å¹³", text: "æ„Ÿæƒ…ä¸Šä½ ä½”æ“šä¸»å°æ¬Šï¼Œä½†åˆ¥å¤ªå¼·å‹¢ã€‚å¤šä¸€é»æº«æŸ”çš„ä»˜å‡ºï¼Œé—œä¿‚æœƒæ›´å’Œè«§ã€‚" },
                career: { grade: "å‰", text: "å·¥ä½œæ•ˆç‡é«˜ï¼ŒåŸ·è¡ŒåŠ›å¼·ï¼Œé©åˆè¡åˆºæ¥­ç¸¾æˆ–å®Œæˆè‰±é›£ä»»å‹™ï¼Œæˆæœæ¸…æ™°å¯è¦‹ã€‚" },
                wealth: { grade: "å¤§å‰", text: "ä»Šæ—¥è²¡æ°£æ¥µä½³ï¼æ©ŸæœƒæŒæ¡åœ¨ä½ æ‰‹ä¸­ï¼Œé©åˆä¸»å‹•å°‹æ±‚å•†æ©Ÿæˆ–è«‡åˆ¤ï¼Œä»˜å‡ºå¿…æœ‰å›å ±ã€‚" }
            },
            "OUTPUT": { // æˆ‘ç”Ÿ (é£Ÿå‚·)
                love: { grade: "å‰", text: "ä½ çš„é­…åŠ›ç„¡æ³•æ“‹ï¼Œé©åˆä¸»å‹•è¡¨é”æ„›æ„æˆ–è£½é€ æµªæ¼«é©šå–œï¼Œå°æ–¹æœƒè¢«ä½ çš„æ‰è¯å¸å¼•ã€‚" },
                career: { grade: "å¹³", text: "å‰µæ„æºæºä¸çµ•ï¼Œé©åˆä¼åŠƒæˆ–ç™¼è¡¨æ¼”èªªã€‚ä½†è¦æ³¨æ„åˆ¥å¤ªéç†æƒ³åŒ–ï¼Œéœ€è€ƒé‡ç¾å¯¦åŸ·è¡Œé¢ã€‚" },
                wealth: { grade: "å¹³", text: "å®¹æ˜“æ†‘æ„Ÿè¦ºæ¶ˆè²»ï¼Œè¦æ³¨æ„è¡å‹•è³¼ç‰©ã€‚è²¡é‹å¹³å¹³ï¼Œé©åˆç”¨å°ˆæ¥­æŠ€èƒ½æ›å–å ±é…¬ã€‚" }
            },
            "PRESSURE": { // å‰‹æˆ‘ (å®˜æ®º)
                love: { grade: "å‡¶", text: "ä»Šæ—¥å®¹æ˜“æ„Ÿåˆ°å£“åŠ›ï¼Œèˆ‡ä¼´ä¾¶æºé€šæ™‚é¿å…æƒ…ç·’åŒ–ã€‚å–®èº«è€…å¯èƒ½æœƒé‡åˆ°ä¸åˆé©çš„çˆ›æ¡ƒèŠ±ã€‚" },
                career: { grade: "å‡¶", text: "è·å ´ä¸ŠæŒ‘æˆ°è¼ƒå¤šï¼Œå®¹æ˜“å—åˆ°åš´æ ¼æª¢è¦–ã€‚å»ºè­°è¬¹è¨€æ…è¡Œï¼Œå°ˆæ³¨æ–¼ä»½å…§å·¥ä½œï¼Œä¸å‡ºéŒ¯å°±æ˜¯è´ã€‚" },
                wealth: { grade: "å‡¶", text: "æ°£å ´å—å£“ï¼Œåˆ¤æ–·åŠ›æ˜“å—å¹²æ“¾ï¼Œä¸å®œé€²è¡Œé«˜é¢¨éšªæŠ•è³‡æˆ–è³­åšï¼Œä¿å®ˆå„²è“„ç‚ºä¸Šã€‚" }
            }
        };

        const data = contentMap[code];

        // ç”Ÿæˆä¸‰å€‹å€å¡Š
        categories.forEach(cat => {
            const item = data[cat.type];
            html += `
                <div class="fortune-item">
                    <div class="fortune-header">
                        <span class="fortune-title">${cat.title}</span>
                        <span class="tag tag-${item.grade}">${item.grade}</span>
                    </div>
                    <div class="fortune-content">${item.text}</div>
                </div>
            `;
        });

        // æœ€å¾ŒåŠ ä¸Šç¸½çµæ€§çš„ç´éŸ³äº’å‹•è§£é‡‹
        html += `
            <div class="nayin-explanation" style="margin-top: 15px;">
                <strong>ğŸŒŸ ç´éŸ³èƒ½é‡è§£ç¢¼ï¼š</strong><br>
                ä»Šæ—¥æ˜¯ã€<span class="highlight-target">${dayNY}</span>ã€‘æ—¥ï¼Œèˆ‡æ‚¨çš„ã€<span class="highlight-user">${userNY}</span>ã€‘å½¢æˆ
                <span style="color:var(--primary); font-weight:bold;">
                    ${code === "SUPPORT" ? "ã€Œèƒ½é‡æ»‹é¤Šã€" : 
                      code === "SAME" ? "ã€Œèƒ½é‡å…±æŒ¯ã€" : 
                      code === "CONTROL" ? "ã€Œä¸»å°æŒæ§ã€" : 
                      code === "OUTPUT" ? "ã€Œèƒ½é‡é‡‹æ”¾ã€" : "ã€Œç’°å¢ƒè©¦ç…‰ã€"}
                </span>ä¹‹å±€ã€‚
                <br><br>
                ${
                    code === "SUPPORT" ? `æ°´èƒ½ç”Ÿæœ¨ï¼Œæœ¨èƒ½ç”Ÿç«... ä»Šæ—¥äº”è¡Œç›¸ç”Ÿï¼Œç’°å¢ƒè³‡æºæµå‘æ‚¨ï¼Œåšäº‹æœƒè¦ºå¾—ç‰¹åˆ¥é †æ‰‹ã€‚` :
                    code === "SAME" ? `é‡‘è¦‹é‡‘ï¼Œæœ¨è¦‹æœ¨... å±¬æ€§ç›¸åŒï¼Œè²æ°£ç›¸æ±‚ï¼Œæ˜¯çµä¼´åŒè¡Œçš„å¥½æ—¥å­ã€‚` :
                    code === "CONTROL" ? `é‡‘å‰‹æœ¨ï¼Œæœ¨å‰‹åœŸ... æ‚¨å»å‰‹åˆ¶ä»Šæ—¥æ°£å ´ï¼Œä»£è¡¨æ‚¨éœ€è¦ä»˜å‡ºåŠªåŠ›å»é§•é¦­æ©Ÿæœƒï¼Œé›–ç´¯ä½†æœ‰æˆã€‚` :
                    code === "OUTPUT" ? `æ°´ç”Ÿæœ¨ï¼Œæœ¨ç”Ÿç«... æ‚¨å»ç”ŸåŠ©ä»Šæ—¥æ°£å ´ï¼Œæ‰è¯å¾—ä»¥å±•ç¾ï¼Œä½†åˆ‡è¨˜ä¸è¦éåº¦æ¶ˆè€—è‡ªå·±ã€‚` :
                    `ç«å‰‹é‡‘ï¼Œé‡‘å‰‹æœ¨... ç’°å¢ƒæ°£å ´å‰‹åˆ¶æ‚¨ï¼Œé›–ç„¶é˜»åŠ›è¼ƒå¤§ï¼Œä½†æ­£æ˜¯ç£¨ç·´è€å¿ƒèˆ‡å®šæ€§çš„æ™‚åˆ»ã€‚`
                }
            </div>
        `;

        return html;
    }
</script>

</body>
</html>
